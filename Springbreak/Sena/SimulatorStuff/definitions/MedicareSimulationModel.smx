<?xml version="1.0" encoding="utf-8"?>
<SimulationModel xmlns="http://www.senactive.com/Schemas/SimulationModel/v1_0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.senactive.com/Schemas/SimulationModel/v1_0
..\..\xsd\SimulationModel.xsd" name="MedicareSimulationModel" displayName="MedicareSimulatinModel" schemaVersion="1.0">
	<!--
        *******************************
        **** Value Generators ****
        *******************************
    -->

	<!--
        LoggerId
    -->

	<ValueGenerator name="VG_LoggerId">
		<NumRange>
			<Start>0</Start>
			<Stop>100</Stop>
			<Increment>1</Increment>
			<DataType>System.Int32</DataType>
		</NumRange>
	</ValueGenerator>

	<!--
        ProductId
    -->

	<ValueGenerator name="VG_Product">
		<Enumeration>
			<Elements>
				<Element>Arzeutic</Element>
				<Element>Tosalumn</Element>
				<Element>Gernazilin</Element>
				<Element>Zatanol</Element>
				<Element>Pernazal</Element>
			</Elements>
			<DataType>System.String</DataType>
		</Enumeration>
	</ValueGenerator>

	<ValueGenerator name="VG_Product2">
		<Enumeration>
			<Elements>
				<Element>Arzeutic</Element>
				<Element>Tosalumn</Element>
				<Element>Gernazilin</Element>
				<Element>Zatanol</Element>
				<Element>Pernazal</Element>
			</Elements>
			<DataType>System.String</DataType>
		</Enumeration>
	</ValueGenerator>
	<!-- Min Temp fr jedes Produkt (Enumeration genauso gro� wie Product-Enumeration) -->
	<ValueGenerator name="VG_MinTemp">
		<Enumeration>
			<Elements>
				<Element>3</Element>
				<Element>-10</Element>
				<Element>0</Element>
				<Element>5</Element>
				<Element>-20</Element>
			</Elements>
			<DataType>System.String</DataType>
		</Enumeration>
	</ValueGenerator>

	<!-- Max Temp f�r jedes Produkt (Enumeration genauso gro� wie Product-Enumeration) -->
	<ValueGenerator name="VG_MaxTemp">
		<Enumeration>
			<Elements>
				<Element>8</Element>
				<Element>-2</Element>
				<Element>10</Element>
				<Element>9</Element>
				<Element>-10</Element>
			</Elements>
			<DataType>System.String</DataType>
		</Enumeration>
	</ValueGenerator>


	<!-- CarrierId
	
	-->
	<ValueGenerator name="VG_CarrierId">
		<Enumeration>
			<Elements>
				<Element>122</Element>
				<Element>544</Element>
				<Element>762</Element>
				<Element>221</Element>
				<Element>82</Element>
			</Elements>
			<DataType>System.Int32</DataType>
		</Enumeration>
	</ValueGenerator>



	<!--
	Amount der Bestellung 
	-->
	<ValueGenerator name="VG_Amount">
		<Enumeration>
			<Elements>
				<Element>10</Element>
				<Element>500</Element>
				<Element>1000</Element>
				<Element>2000</Element>
				<Element>5000</Element>
			</Elements>
			<DataType>System.Int32</DataType>
		</Enumeration>
	</ValueGenerator>


	<!--
        OrderId
    -->
	<ValueGenerator name="VG_OrderId">
		<NumRange>
			<Start>1000</Start>
			<Stop>1000000</Stop>
			<Increment>1</Increment>
			<DataType>System.Int32</DataType>
		</NumRange>
	</ValueGenerator>

	<ValueGenerator name="VG_DateTimeHour">
		<DateRange>
			<Start>2005-01-01T00:00:00</Start>
			<Stop>2010-01-01T00:00:00</Stop>
			<Increment>
				<Minutes>60</Minutes>
			</Increment>
		</DateRange>
	</ValueGenerator>
	<ValueGenerator name="VG_DateTimeHour2">
		<DateRange>
			<Start>2005-01-01T00:00:01</Start>
			<Stop>2010-01-01T00:00:01</Stop>
			<Increment>
				<Minutes>60</Minutes>
			</Increment>
		</DateRange>
	</ValueGenerator>

	<!--
    Value generator for the StaffMembers
    -->
	<ValueGenerator name="VG_Staffmember">
		<Enumeration>
			<Elements>
				<Element>Peter Jackson</Element>
				<Element>John Travolta</Element>
				<Element>Steven Taylor</Element>
				<Element>Luke Skywalker</Element>
				<Element>Michael Jordan</Element>
			</Elements>
			<DataType>System.String</DataType>
		</Enumeration>
	</ValueGenerator>

	<ValueGenerator name="VG_StaffmemberDestination">
		<Enumeration>
			<Elements>
				<Element>Maria Cane</Element>
				<Element>Michael Owen</Element>
				<Element>Antonio Sanchez</Element>
				<Element>Roger Fry</Element>
				<Element>Lucy Smith</Element>
			</Elements>
			<DataType>System.String</DataType>
		</Enumeration>
	</ValueGenerator>




	<!--
    Value generator for the Route
    -->

	<ValueGenerator name="VG_Route">
		<Enumeration>
			<Elements>
				<Element>Vienna</Element>
				<Element>Munich</Element>
				<Element>Munich</Element>
				<Element>Berlin</Element>
				<Element>Berlin</Element>
				<Element>London</Element>
				<Element>London</Element>
				<Element>Buenos Aires</Element>
				<Element>Buenos Aires</Element>
				<Element>La Plata</Element>
			</Elements>
			<DataType>System.String</DataType>
		</Enumeration>
	</ValueGenerator>

	<ValueGenerator name="VG_Boolean">
		<Booleans>
			<ProbabilityTrue>1</ProbabilityTrue>
		</Booleans>
	</ValueGenerator>

	<ValueGenerator name="VG_Temp">
		<Enumeration>
			<Elements>
				<Element>5.2</Element>
				<Element>5.6</Element>
				<Element>5</Element>
				<Element>7</Element>
				<Element>6.5</Element>
				<Element>7.1</Element>
			</Elements>
			<DataType>System.String</DataType>
		</Enumeration>
	</ValueGenerator>


	<EventObjectGenerator name="EO_ProductCollection">
		<Template>
			<Product>
				<ProductId>
					<ValueGenerator name="VG_Product"/>
				</ProductId>
				<Amount>
					<ValueGenerator name="VG_Amount"/>
				</Amount>
			</Product>
		</Template>
	</EventObjectGenerator>

	<!-- info Shipment 
    TODO: Werte setzen
    -->
	<EventObjectGenerator name="EO_ShipmentInfo">
		<Template>
			<ShipmentInfo>
				<From>Vienna</From>
				<To>LaPlata</To>
				<DeliveryDate>2005-11-12T06:00:00</DeliveryDate>
				<TransportType>Truck</TransportType>
				<Price>2500</Price>
				<MinTemp>3</MinTemp>
				<MaxTemp>8</MaxTemp>
			</ShipmentInfo>
		</Template>
	</EventObjectGenerator>

	<!-- Product to Transport -->
	<EventObjectGenerator name="EO_ProductCollection_Audit">
		<Template>
			<Product>
				<ProductId>
					<ValueGenerator name="VG_Product2"/>
				</ProductId>
				<Amount>
					<ValueGenerator name="VG_Amount"/>
				</Amount>
			</Product>
		</Template>
	</EventObjectGenerator>

	<!-- Temp OK DataLoggerRead -->
	<EventObjectGenerator name="EO_TempCollection_OK">
		<Template>
			<LogEntry>
				<DateTime>
					<ValueGenerator name="VG_DateTimeHour"/>
				</DateTime>
				<Temp>
					<ValueGenerator name="VG_Temp"/>
				</Temp>
			</LogEntry>
		</Template>
	</EventObjectGenerator>


	<!--
        *******************************
        **** Event Generators ****
        *******************************
        
        
    
    -->
	<!--
        Generator for the OrderReceived Events
    -->

	<EventGenerator name="EG_OrderReceived_LaPlata">
		<Template>
			<OrderReceived>
				<OrderId>
					<ValueGenerator name="VG_OrderId"/>
				</OrderId>
				<DateTime>
					<ValueGenerator name="VG_DateTimeHour"/>
				</DateTime>

				<!-- bug sollte ein spaeteres Datum als TransportEnd sein  -->
				<DeliveryDate>
					<ValueGenerator name="VG_DateTimeHour"/>
				</DeliveryDate>

				<Destination>LaPlata</Destination>

				<ProductCollection>
					<EventObjectGenerator name="EO_ProductCollection"/>
				</ProductCollection>

			</OrderReceived>
		</Template>
	</EventGenerator>

	<!-- OrderConfirmed Event -->
	<EventGenerator name="EG_OrderConfirmed">
		<Template>
			<OrderConfirmed>
				<OrderId>
					<ValueGenerator name="VG_OrderId"/>
				</OrderId>
				<DateTime>
					<ValueGenerator name="VG_DateTimeHour"/>
				</DateTime>
			</OrderConfirmed>
		</Template>
	</EventGenerator>

	<!-- ShipmentTenderIssued Event -->
	<EventGenerator name="EG_ShipmentTenderIssued">
		<Template>
			<ShipmentTenderIssued>
				<OrderId>
					<ValueGenerator name="VG_OrderId"/>
				</OrderId>
				<DateTime>
					<ValueGenerator name="VG_DateTimeHour"/>
				</DateTime>
				<FurtherInfo>
					<EventObjectGenerator name="EO_ShipmentInfo"/>
				</FurtherInfo>
			</ShipmentTenderIssued>
		</Template>
	</EventGenerator>

	<!-- ShipmentTenderAccepted Event -->
	<EventGenerator name="EG_ShipmentTenderAccepted">
		<Template>
			<ShipmentTenderAccepted>
				<OrderId>
					<ValueGenerator name="VG_OrderId"/>
				</OrderId>
				<CarrierId>
					<ValueGenerator name="VG_CarrierId"/>
				</CarrierId>
				<DateTime>
					<ValueGenerator name="VG_DateTimeHour"/>
				</DateTime>
			</ShipmentTenderAccepted>
		</Template>
	</EventGenerator>





	<!--
        Generator for the DataLoggerConfigured Events
    -->

	<EventGenerator name="EG_DataLoggerConfigured_LaPlata">
		<Template>
			<DataLoggerConfigured>
				<OrderId>
					<ValueGenerator name="VG_OrderId"/>
				</OrderId>
				<LoggerId>
					<ValueGenerator name="VG_LoggerId"/>
				</LoggerId>
				<DateTime>
					<ValueGenerator name="VG_DateTimeHour"/>
				</DateTime>
				<Staffmember>
					<ValueGenerator name="VG_Staffmember"/>
				</Staffmember>
				<MinTemp>
					<ValueGenerator name="VG_MinTemp"/>
				</MinTemp>
				<MaxTemp>
					<ValueGenerator name="VG_MaxTemp"/>
				</MaxTemp>
				<SenseInterval>60</SenseInterval>
				<Destination>LaPlata</Destination>
			</DataLoggerConfigured>
		</Template>
	</EventGenerator>

	<!--
        Generator for the TransportStart Events
    -->
	<!-- TODO: ValueGenerator -->
	<EventGenerator name="EG_TransportStart">
		<Template>
			<TransportStart>
				<OrderId>
					<ValueGenerator name="VG_OrderId"/>
				</OrderId>
				<DateTime>
					<ValueGenerator name="VG_DateTimeHour"/>
				</DateTime>
				<Location>
					<ValueGenerator name="VG_Route"/>
				</Location>
				<CarrierId>
					<ValueGenerator name="VG_CarrierId"/>
				</CarrierId>
			</TransportStart>
		</Template>
	</EventGenerator>


	<!--
        Generator for the TransportEnd Events
    -->
	<!-- TODO: ValueGenerator -->
	<EventGenerator name="EG_TransportEnd">
		<Template>
			<TransportEnd>
				<OrderId>
					<ValueGenerator name="VG_OrderId"/>
				</OrderId>
				<DateTime>
					<ValueGenerator name="VG_DateTimeHour"/>
				</DateTime>
				<Location>
					<ValueGenerator name="VG_Route"/>
				</Location>
			</TransportEnd>
		</Template>
	</EventGenerator>

	<!-- DataloggerRead -->
	<EventGenerator name="EG_DataLoggerRead">
		<Template>
			<DataLoggerRead>
				<OrderId>
					<ValueGenerator name="VG_OrderId"/>
				</OrderId>
				<LoggerId>
					<ValueGenerator name="VG_LoggerId"/>
				</LoggerId>
				<DateTime>
					<ValueGenerator name="VG_DateTimeHour"/>
				</DateTime>
				<Staffmember>
					<ValueGenerator name="VG_StaffmemberDestination"/>
				</Staffmember>
				<TempData>
					<EventObjectGenerator name="EO_TempCollection_OK">
						<Instances>47</Instances>
					</EventObjectGenerator>
				</TempData>

			</DataLoggerRead>
		</Template>
	</EventGenerator>


	<!--
        Generator for the ShipmentAudit Events
   
	-->
	<EventGenerator name="EG_ShipmentAudit">
		<Template>
			<ShipmentAudit>
				<OrderId>
					<ValueGenerator name="VG_OrderId"/>
				</OrderId>
				<DateTime>
					<ValueGenerator name="VG_DateTimeHour"/>
				</DateTime>
				<Staffmember>
					<ValueGenerator name="VG_StaffmemberDestination"/>
				</Staffmember>
				<CheckedProducts>
					<EventObjectGenerator name="EO_ProductCollection_Audit"/>
				</CheckedProducts>
				<Valid>
					<ValueGenerator name="VG_Boolean"/>
				</Valid>
			</ShipmentAudit>
		</Template>
	</EventGenerator>

	<!--
        Generator for the ShipmentDelivered Events
    -->
	<EventGenerator name="EG_ShipmentDelivered">
		<Template>
			<ShipmentDelivered>
				<OrderId>
					<ValueGenerator name="VG_OrderId"/>
				</OrderId>
				<DateTime>
					<ValueGenerator name="VG_DateTimeHour"/>
				</DateTime>
				<Success>
					<ValueGenerator name="VG_Boolean"/>
				</Success>
			</ShipmentDelivered>
		</Template>
	</EventGenerator>

	<!--
        ***********************
        **** Sequences ****
        ***********************
    -->


	<!-- 
	test wenn selber EventGenerator oefter aufgerufen welche Werte in DB kommen 
	-->

	<EventSequence name="ES_Transport">
		<EventGenerator name="EG_TransportStart"/>
		<EventGenerator name="EG_TransportEnd"/>
		<EventGenerator name="EG_DataLoggerRead"/>
		<EventGenerator name="EG_ShipmentAudit"/>
	</EventSequence>

	<EventSequence name="ES_5Transports">
		<EventSequence name="ES_Transport">
			<Instances>5</Instances>
		</EventSequence>
		<DateSequence>
			<CorrelationData eventType="TransportStart">
				<XPathSelector>
					<XPathExpression>//DateTime</XPathExpression>
				</XPathSelector>
			</CorrelationData>
			<CorrelationData eventType="TransportEnd">
				<XPathSelector>
					<XPathExpression>//DateTime</XPathExpression>
				</XPathSelector>
			</CorrelationData>
			<RandomTimeSpans>
				<Min>
					<Hours>8</Hours>
				</Min>
				<Max>
					<Hours>48</Hours>
				</Max>
				<Granularity>Minutes</Granularity>
			</RandomTimeSpans>
		</DateSequence>
		
		<DateSequence>
			<CorrelationData eventType="TransportEnd">
				<XPathSelector>
					<XPathExpression>//DateTime</XPathExpression>
				</XPathSelector>
			</CorrelationData>
			<CorrelationData eventType="DataLoggerRead">
				<XPathSelector>
					<XPathExpression>//DateTime</XPathExpression>
				</XPathSelector>
			</CorrelationData>
			<RandomTimeSpans>
				<Min>
					<Minutes>4</Minutes>
				</Min>
				<Max>
					<Minutes>90</Minutes>
				</Max>
				<Granularity>Minutes</Granularity>
			</RandomTimeSpans>
		</DateSequence>
		
		<!-- Achtung: diese 2 Sequenzen (TransportEnd-DataloggerRead; TransportEnd-ShipmentAudit) gehen nur wenn man sie so auftrennt. -->
		<DateSequence>
			<CorrelationData eventType="TransportEnd">
				<XPathSelector>
					<XPathExpression>//DateTime</XPathExpression>
				</XPathSelector>
			</CorrelationData>
			<CorrelationData eventType="ShipmentAudit">
				<XPathSelector>
					<XPathExpression>//DateTime</XPathExpression>
				</XPathSelector>
			</CorrelationData>
			<RandomTimeSpans>
				<Min>
					<Minutes>10</Minutes>
				</Min>
				<Max>
					<Minutes>90</Minutes>
				</Max>
				<Granularity>Minutes</Granularity>
			</RandomTimeSpans>
		</DateSequence>


	</EventSequence>


	<!--
    Main Shipment Sequence TransportStart - TransportEnd
    -->
	<EventSequence name="ES_RouteVienna_LaPlata">
		<EventGenerator name="EG_OrderReceived_LaPlata"/>

		<EventGenerator name="EG_OrderConfirmed"/>
		<EventGenerator name="EG_ShipmentTenderIssued"/>
		<EventGenerator name="EG_ShipmentTenderAccepted"/>


		<EventGenerator name="EG_DataLoggerConfigured_LaPlata">
			<Instances>1</Instances>
		</EventGenerator>


		<EventSequence name="ES_5Transports"/>



		<EventGenerator name="EG_ShipmentDelivered"/>

		<!-- Corellations for events -->

		<!-- alle Events im Durchlauf haben gleiche OrderId -->
		<EventCorrelation>
			<CorrelationData eventType="OrderReceived">
				<XPathSelector>
					<XPathExpression>//OrderId</XPathExpression>
				</XPathSelector>
			</CorrelationData>
			<CorrelationData eventType="OrderConfirmed">
				<XPathSelector>
					<XPathExpression>//OrderId</XPathExpression>
				</XPathSelector>
			</CorrelationData>
			<CorrelationData eventType="ShipmentTenderIssued">
				<XPathSelector>
					<XPathExpression>//OrderId</XPathExpression>
				</XPathSelector>
			</CorrelationData>
			<CorrelationData eventType="ShipmentTenderAccepted">
				<XPathSelector>
					<XPathExpression>//OrderId</XPathExpression>
				</XPathSelector>
			</CorrelationData>


			<CorrelationData eventType="DataLoggerConfigured">
				<XPathSelector>
					<XPathExpression>//OrderId</XPathExpression>
				</XPathSelector>
			</CorrelationData>
			<CorrelationData eventType="TransportStart">
				<XPathSelector>
					<XPathExpression>//OrderId</XPathExpression>
				</XPathSelector>
			</CorrelationData>

			<CorrelationData eventType="TransportEnd">
				<XPathSelector>
					<XPathExpression>//OrderId</XPathExpression>
				</XPathSelector>
			</CorrelationData>
			<CorrelationData eventType="DataLoggerRead">
				<XPathSelector>
					<XPathExpression>//OrderId</XPathExpression>
				</XPathSelector>
			</CorrelationData>
			<CorrelationData eventType="ShipmentAudit">
				<XPathSelector>
					<XPathExpression>//OrderId</XPathExpression>
				</XPathSelector>
			</CorrelationData>

			<CorrelationData eventType="ShipmentDelivered">
				<XPathSelector>
					<XPathExpression>//OrderId</XPathExpression>
				</XPathSelector>
			</CorrelationData>

		</EventCorrelation>

		<!-- alle Datalogger gleiches Ziel -->
		<EventCorrelation>
			<CorrelationData eventType="DataLoggerConfigured">
				<XPathSelector>
					<XPathExpression>//Destination</XPathExpression>
				</XPathSelector>
			</CorrelationData>
		</EventCorrelation>

		<!-- TransportStart CarrierId == ShipmentTenderAccepted CarrierId-->
		<EventCorrelation>
			<CorrelationData eventType="ShipmentTenderAccepted">
				<XPathSelector>
					<XPathExpression>//CarrierId</XPathExpression>
				</XPathSelector>
			</CorrelationData>
			<CorrelationData eventType="TransportStart">
				<XPathSelector>
					<XPathExpression>//CarrierId</XPathExpression>
				</XPathSelector>
			</CorrelationData>
		</EventCorrelation>

		<!-- alle ShipmentAudits gleiche Menge, Produkt wie OrderReceived-->
		<EventCorrelation>
			<CorrelationData eventType="OrderReceived">
				<XPathSelector>
					<XPathExpression>//ProductCollection</XPathExpression>
				</XPathSelector>
			</CorrelationData>
			<CorrelationData eventType="ShipmentAudit">
				<XPathSelector>
					<XPathExpression>//CheckedProducts</XPathExpression>
				</XPathSelector>
			</CorrelationData>
		</EventCorrelation>



		<!-- 
		  	Sequenz vom OrderReceive bis TransportStart
			Zwischen jeden Event max 24Stunden -->
		<DateSequence>
			<CorrelationData eventType="OrderReceived">
				<XPathSelector>
					<XPathExpression>//DateTime</XPathExpression>
				</XPathSelector>
			</CorrelationData>
			<CorrelationData eventType="OrderConfirmed">
				<XPathSelector>
					<XPathExpression>//DateTime</XPathExpression>
				</XPathSelector>
			</CorrelationData>
			<CorrelationData eventType="ShipmentTenderIssued">
				<XPathSelector>
					<XPathExpression>//DateTime</XPathExpression>
				</XPathSelector>
			</CorrelationData>
			<CorrelationData eventType="ShipmentTenderAccepted">
				<XPathSelector>
					<XPathExpression>//DateTime</XPathExpression>
				</XPathSelector>
			</CorrelationData>

			<CorrelationData eventType="DataLoggerConfigured">
				<XPathSelector>
					<XPathExpression>//DateTime</XPathExpression>
				</XPathSelector>
			</CorrelationData>
			<CorrelationData eventType="TransportStart">
				<XPathSelector>
					<XPathExpression>//DateTime</XPathExpression>
				</XPathSelector>
			</CorrelationData>
			<RandomTimeSpans>
				<Min>
					<Minutes>1</Minutes>
				</Min>
				<Max>
					<Hours>24</Hours>
				</Max>
				<Granularity>Minutes</Granularity>
			</RandomTimeSpans>
		</DateSequence>


		<!--wenn am Zielort angekommen bis zu max 24 zwischen Transport! -->

		<DateSequence>
			<CorrelationData eventType="TransportEnd">
				<XPathSelector>
					<XPathExpression>//DateTime</XPathExpression>
				</XPathSelector>
			</CorrelationData>


			<CorrelationData eventType="ShipmentDelivered">
				<XPathSelector>
					<XPathExpression>//DateTime</XPathExpression>
				</XPathSelector>
			</CorrelationData>

			<RandomTimeSpans>
				<Min>
					<Minutes>180</Minutes>
				</Min>
				<Max>
					<Hours>24</Hours>
				</Max>
				<Granularity>Minutes</Granularity>
			</RandomTimeSpans>
		</DateSequence>

		<DateSequence>
			<CorrelationData eventType="ShipmentDelivered">
				<XPathSelector>
					<XPathExpression>//DateTime</XPathExpression>
				</XPathSelector>
			</CorrelationData>

			<CorrelationData eventType="OrderReceived">
				<XPathSelector>
					<XPathExpression>//DeliveryDate</XPathExpression>
				</XPathSelector>
			</CorrelationData>

			<RandomTimeSpans>
				<Min>
					<Hours>24</Hours>
				</Min>
				<Max>
					<Hours>168</Hours>
				</Max>
				<Granularity>Minutes</Granularity>
			</RandomTimeSpans>
		</DateSequence>

	</EventSequence>

	<!--
    ***************************************
    **** Simulator Run Definitions ****
    ***************************************
    -->
	<SimulationRun name="ES_RouteVienna_LaPlata">
		<EventSequenceSimulation>
			<EventSequence name="ES_RouteVienna_LaPlata"/>
			<Instances>1</Instances>
			<Concurrency>Serialized</Concurrency>
		</EventSequenceSimulation>
	</SimulationRun>



	<EventReceiver name="Receiver1" xmlns="http://www.senactive.com/Schemas/SimulationModel/v1_0">
		<MsmqQueue>
			<QueueName>.\Private$\EMQueue</QueueName>
			<Transactional>true</Transactional>
		</MsmqQueue>
	</EventReceiver>
</SimulationModel>
